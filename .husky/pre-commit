#!/bin/sh
echo "ðŸš€ Running pre-commit checks..."

pids=""

bun run lint & pids="$pids $!"
bun run test-ci & pids="$pids $!"
bun run check-format & pids="$pids $!"
bun run type-check & pids="$pids $!"

fail=0
for pid in $pids; do
  if ! wait "$pid"; then
    fail=1
  fi
done

if [ $fail -ne 0 ]; then
  echo "ðŸš¨ Pre-commit checks failed. Please fix the above issues before committing."
  exit 1
fi

echo "âœ… All pre-commit checks passed."
